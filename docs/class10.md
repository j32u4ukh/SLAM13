# 建圖

將觀測到的影像轉換為模型，根據不同應用有不同的方式來進行建圖，可能應用有下列幾項：

1. 定位：利用全域的描述子資訊，知道相機當前在地圖中的哪裡。甚至還能把地圖儲存下來，下一次執行也能知道相機的位置，只須對地圖進行一次建模。

2. 導航：在地圖中進行路徑規劃，在任意兩個地圖點間尋找路徑。在這個過程中，需要知道**地圖中哪些地方不可透過，而哪些地方是可以透過的**。這超出了稀疏特徵點地圖的能力範圍，而開始需要使用**稠密地圖**。

3. 避障：與導航類似，但更注重局部的、動態的障礙物的處理。同樣，僅有特徵點，無法判斷該特徵點是否為障礙物，所以也需要使用**稠密地圖**。

4. 重建：主要用於展示，所以希望它看上去更為舒服、美觀。同樣使用**稠密地圖**，但不僅止於稠密點雲重建，更希望能建構帶有紋理的表面。

5. 互動：人和地圖之間是可以互動的，例如『取得桌子上的報紙』，會和牆壁產生碰撞。上述過程中，桌子與報紙各有不同的性質，需要知道哪一塊地圖是『桌子』，什麼叫做『之上』，什麼叫做『報紙』。因此需要對地圖有更高層面的認知，也稱為『語義地圖』。

## 一元稠密重建

在稠密重建中，我們需要知道每一個像素(或大部分像素)的距離，對此有以下幾個解決方案：

1. 一元相機：估計相機運動，並利用『三角測量』或『極線搜索』計算像素的距離。

2. 二元相機：利用左右目的視差計算像素的距離，多目相機的原理相同。

3. RGB-D 相機：直接獲取像素距離。

前兩種方式稱為『立體視覺(Stereo Vision)』,其中移動一元相機的又稱為『移動角度的立體視覺(Moving View Stereo, MVS)』。

<table>
  <tr>
    <td></td>
    <td><b>一元、二元</b></td>
    <td><b>RGB-D</b></td>
  </tr>
  <tr>
    <td><b>優點</b></td>
    <td>在 RGB-D 無法被極佳應用的室外、大場景場合中，仍可透過立體視覺估計深度資訊</td>
    <td>直接測量距離,計算量較小</td>
  </tr>
  <tr>
    <td><b>缺點</b></td>
    <td>深度估計的計算量極大，且不比 RGB-D 可靠</td>
    <td>受到量程、應用範圍和光源等限制，在室外、大場景場合中無法有效測量距離</td>
  </tr>
</table>

* 使用**極線搜索**和**塊比對技術**，來得知第一幅圖的某像素在其他圖的位置。
* 和一般三角測量不同的是，會進行多次估計，使深度估計收斂。

## 八叉樹地圖(Octo-map)

* 一種具有良好壓縮效能的地圖形式。
* 點雲地圖無法處理運動的物體，而八叉樹可隨時更新。

八叉樹：把『將一個方塊分成同樣大小的八個』這件事，看成『從一個節點展開成八個子節點』。
當某個方塊的所有子節點都被佔據或都沒被佔據，就**沒有必要展開這個節點**。

<table>
  <tr>
    <td><a href="https://j32u4ukh.github.io/SLAM13/class9.html">上一篇</a></td>
    <td><a href="https://j32u4ukh.github.io/SLAM13/">首頁</a></td>
    <td><a href="https://j32u4ukh.github.io/SLAM13/class11.html">下一篇</a></td>
  </tr>
</table>